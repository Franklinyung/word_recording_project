# word_recording_project
pythonå®ç°è‰¾å®¾æµ©æ–¯èƒŒå•è¯åŠŸèƒ½ï¼Œå®ç°è‡ªåŠ¨æå–å•è¯ã€é‚®ä»¶å‘é€ï¼Œéƒ¨ç½²åœ¨é˜¿é‡Œäº‘æœåŠ¡å™¨ï¼Œå†ä¹Ÿä¸ç”¨æ‹…å¿ƒèƒŒå•è¯å•¦!!


å·²ç»å®Œæˆäº†[åˆ©ç”¨pythonçˆ¬è™«å®ç°å®šæ—¶QQé‚®ç®±æ¨é€è‹±æ–‡æ–‡ç« ï¼Œè¾…åŠ©å­¦ä¹ è‹±è¯­](https://blog.csdn.net/weixin_43745588/article/details/104132770)çš„é¡¹ç›®ï¼Œç´¢æ€§å°±ä¸€å£æ°”åˆ©ç”¨pythonå¤šåšä¸€äº›è‡ªåŠ¨åŒ–è¾…åŠ©è‹±è¯­å­¦ä¹ çš„é¡¹ç›®ï¼Œå¯¹è‡ªå·±çš„ç¼–ç¨‹èƒ½åŠ›å’Œè‹±æ–‡æ°´è¯„ä¹Ÿæœ‰ä¸€å®šçš„å¸®åŠ©ï¼Œäºæ˜¯åœ¨ä¸¤å¤©çš„åŠªåŠ›ä¸‹ï¼Œæˆ‘å®Œæˆäº†ä»Šå¤©çš„é¡¹ç›®ã€‚

é¦–å…ˆæ˜¯[è‰¾å®¾æµ©æ–¯è®°å¿†æ³•](https://blog.csdn.net/Yangh01/article/details/88941960)ï¼Œå¤§å®¶äº†è§£ä¸€ä¸‹çœŸçš„éå¸¸æœ‰æ•ˆæœï¼ˆè‡³å°‘å¯¹äºæˆ‘æ¥è®²å•¦â”‘(ï¿£Ğ” ï¿£)â”ï¼‰
___
é¡¹ç›®æºç ï¼š
é“¾æ¥: https://pan.baidu.com/s/1Y6OuGZbAXrDNuGcHVO2EZQ æå–ç : 3se3
___

å½“ç„¶ï¼Œæˆ‘ä¹Ÿä¼šæŠŠè‡ªå·±çš„é¡¹ç›®ä¸Šä¼ åˆ°githubä¸Šä¾›å¤§å®¶æŒ‡æ­£ï¼Œç”±äºæœ¬äººéå¸¸å–œæ¬¢pythonå’Œè‹±è¯­ï¼Œæ‰€ä»¥åæœŸä¹Ÿåšå¾ˆå¤šå°†ä¸¤è€…ç»“åˆèµ·æ¥çš„é¡¹ç›®ã€‚æ‰€ä»¥ï¼Œå¦‚æœå¤§å®¶å¯¹æœ¬é¡¹ç›®æœ‰å…´è¶£ï¼Œå¸Œæœ›ä½“éªŒæˆ–åŠ å…¥å¼€å‘ï¼Œåˆæˆ–è€…å¯¹å®ƒæœ‰ä¸€å®šçš„æƒ³æ³•ä¸æ„è§ï¼Œæ¬¢è¿åŠ å…¥æˆ‘æœ€è¿‘ç»„å»ºçš„äº¤æµç¾¤ã€‚è°¢è°¢å¤§å®¶å•¦~~

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200204092441231.JPG?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzc0NTU4OA==,size_16,color_FFFFFF,t_70)

æœ¬é¡¹ç›®ä¸»è¦æ˜¯é€šè¿‡åœ¨äº‹å…ˆå‡†å¤‡å¥½çš„excelå•è¯æ–‡ä»¶ä¸­æ¯å¤©æŠ½å–å•è¯ï¼Œå¹¶åå¤ä½¿ç”¨QQé‚®ç®±å‘é€åˆ°è‡ªå·±çš„é‚®ç®±é‡Œæé†’è‡ªå·±æœ‰ä¸€å®šè§„å¾‹çš„èƒŒå•è¯ï¼Œé¡¹ç›®æœ€å¤§çš„éš¾ç‚¹æœ‰ä¸‰ã€‚

___
1. å¯¹äºcsvæ–‡ä»¶çš„å¯¹åº”åˆ‡ç‰‡ä»»åŠ¡ç­‰æ“ä½œ
2. å¯¹äºæ—¥å¿—çš„è®°å½•
3. è‰¾å®¾æµ©æ–¯è®°å¿†æ³•æ˜¯ä¸€ä¸ªå‘¨æœŸæ€§çš„è¿‡ç¨‹ï¼Œéœ€è¦åå¤çš„è®¡ç®—ã€‚
___
å½“ç„¶ï¼Œç”±äºè¿™ä¸ªé¡¹ç›®çš„æ–‡ä»¶è¿˜æ˜¯æ¯”è¾ƒå¤šçš„ï¼Œæ‰€ä»¥ä¸ºäº†ç®€åŒ–è¿™ä¸ªé¡¹ç›®ï¼Œæˆ‘å°±å…ˆæŒ‰ç…§è‡ªå·±çš„å¼€å‘æ€è·¯æ¥è¯´ï¼Œå½“ç„¶å¦‚æœè¦è‡ªå·±æ¥ä½¿ç”¨æœ¬é¡¹ç›®è¿˜æ˜¯è¦è´¹ä¸€ç•ªå¿ƒæ€è¯»ä¸€è¯»ä»£ç æ‰å¥½ï¼Œå› ä¸ºåœ¨dataframeæ•°æ®çš„å¤„ç†éƒ¨åˆ†éšä¾¿æ‹¿ä¸€ä¸ªå°å‘è®²ä¸€ä¸‹éƒ½æ˜¯ä¸€ç¯‡æ–‡ç« ï¼ˆğŸ˜‚ï¼‰æ‰€ä»¥ï¼Œå„ä½ä¸€å®šè¦è€å¿ƒè¯»ä¸‹å»é¸­ã€‚
___

å¥½äº†
 **show me the code**

___
å¼€å‘ç¯å¢ƒ ï¼špython3.6 
IDEA  :	 pycharm2019
é˜¿é‡Œäº‘ECSï¼š centos7

æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹ä¸€ä¸‹é¡¹ç›®è·¯å¾„ï¼Œå¹¶æ³¨æ„å¯¹åº”è¿›è¡Œè§£é‡Šï¼š
ï¼ˆå¿½ç•¥æˆ‘æ‹™ç•¥çš„å˜é‡è‹±æ–‡ï¼Œå°±æ˜¯å› ä¸ºè¿™æ ·æ‰€ä»¥æ‰å¥½å¥½å­¦ä¹ è‹±è¯­é¸­ï¼‰

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200204093859227.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzc0NTU4OA==,size_16,color_FFFFFF,t_70)
___
åˆ†åˆ«æ¥è§£é‡Šä¸€ä¸‹

**data ç›®å½•**ï¼š
ç”¨äºå­˜æ”¾æ—¥å¿—æ–‡ä»¶ï¼Œåˆ†åˆ«æœ‰data_log.csvå’Œword.csv
*data_log.csv* ç”¨äºæ¯å¤©éšæœºæŠ½å–å•è¯çš„æ—¶å€™é¿å…æŠ½å–åˆ°é‡å¤çš„å•è¯ã€‚
*word.csv* æ˜¯æ¯å¤©å°†æ¯ä¸ªå•è¯çš„timeæ—¶é—´æ•°æ®è®°å½•è¿›å»è¿›è€Œç”¨äºè®¡ç®—å•è¯å¤ä¹ çš„æ—¶é—´ã€‚
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200204094129254.png)
___
****every_day_word** ç›®å½•**ï¼š
ç”¨äºå­˜å‚¨æ¯å¤©éšæœºæŠ½å–çš„å•è¯æœºå™¨è¯ä¹‰ç­‰ç›¸å…³ä¿¡æ¯ï¼Œå¹¶å°†å…¶å­˜å‚¨ä¸ºcsvæ ¼å¼ï¼Œä»¥å¯¹åº”çš„æ—¶é—´ä¸ºæ–‡ä»¶åå­˜å‚¨ï¼ŒåŒæ­¥åœ¨ä¸Šé¢çš„data_log.csvçš„timeç´¢å¼•å†…ã€‚
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200204094727143.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzc0NTU4OA==,size_16,color_FFFFFF,t_70)
___
**word ç›®å½•** ï¼š
å­˜å‚¨æ€»çš„å•è¯å¤§è¡¨æ•°æ®çš„ç›®å½•ï¼Œå¾ˆç®€å•ã€‚

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200204094908835.png)
___
æ¥ä¸‹æ¥å°±æ˜¯æˆ‘ä»¬çš„é¡¹ç›®ä»£ç éƒ¨åˆ†ï¼Œå¦‚ä½ æ‰€è§é¡¹ç›®ä»£ç éƒ½åœ¨é¡¹ç›®çš„æ ¹ç›®å½•å¤„ï¼Œ
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200204095028483.png)
æ¥ä¸‹æ¥æˆ‘ä¼šä¸€ ä¸€çš„è¯´æ˜è¿™äº›ä»£ç ,å½“ç„¶æ˜¯ä»¥æˆ‘è‡ªå·±çš„é¡ºåºï¼Œå¯¹äº†ä»£ç çš„è¯¦ç»†è§£é‡Šåœ¨ä»£ç çš„æ³¨é‡Šé‡Œé¢ï¼Œæœ‰ä»»ä½•ç–‘é—®å’Œæƒ³æ³•å¯ä»¥åŠ å…¥ä¸Šé¢çš„ç¾¤æ¥äº¤æµã€‚
***

## word_read_project.py

***

è¿™ä¸€éƒ¨åŒ…å«äº†å¤šä¸ªå‡½æ•°ä¸å˜é‡ï¼Œæ˜¯é¡¹ç›®æ–‡ä»¶å¤„ç†çš„ç¬¬ä¸€æ ¸å¿ƒéƒ¨åˆ†ï¼Œä¸»è¦éš¾ç‚¹åœ¨äºdataframeçš„æ§åˆ¶é—®é¢˜ä»¥åŠæ—¥å¿—çš„è¯»å†™é—®é¢˜ï¼Œéœ€è¦è€å¿ƒçš„çœ‹å®Œï¼Œæ¨èæ­é…pycharmä¸“ä¸šç‰ˆä½¿ç”¨ï¼Œéå¸¸æ–¹ä¾¿ã€‚

```
#auther :keepython
import pandas as pd
import numpy as np
import os
import time
import random

word_file_path = 'word/å…­çº§æ ¸å¿ƒè¯æ±‡è¡¨(EXCELè¡¨æ ¼).xls'
data_log_path = 'data/data_log.csv'
# data_log = pd.read_csv(data_log_path)
words = pd.read_excel(word_file_path,header=0)
# print(len(words)+1)#æ±‚å‡ºä¸€å…±å¤šå°‘åˆ—ï¼Œä»1å¼€å§‹ç®—
# print(words.columns)#åˆ—ç´¢å¼•åç§°
# print(words.index)#è¡Œç´¢å¼•åç§°

words_index = words.index

#å‡½æ•°åŠŸèƒ½ï¼šä¼ å…¥éšæœºç”Ÿæˆçš„å•è¯ç´¢å¼•ï¼Œè¿”å›å•è¯dataframeç›¸å…³ä¿¡æ¯
def find_word(random_word_index,words):
	print(type(random_word_index))
	#æ ¹æ®éšæœºå•è¯çš„ç´¢å¼•å¯¼å‡ºå•è¯çš„ç›¸å…³ä¿¡æ¯
	random_words = words.loc[list(random_word_index)]
	# print(random_words)
	return random_words

#å‡½æ•°åŠŸèƒ½: åœ¨è¿›è¡Œrandom_80å‡½æ•°æ“ä½œä»¥åå¯¹word.csvè¿›è¡ŒåŒæ­¥è®°å½•,æ³¨æ„ä¼ è¿›æ¥çš„å¿…é¡»æ˜¯åˆ—è¡¨çš„å½¢å¼
def word_csv_log(random_words,time_stamp):
	word_path = 'data/word.csv'
	word_log = pd.read_csv(word_path,index_col=0)#è¯»å–å•è¯æ—¥å¿—æ–‡ä»¶,åŒæ—¶å°†ç´¢å¼•è®¾ç½®ä¸ºå¯¹åº”çš„æ—¶é—´
	for random_word in random_words:#å°†å¯¹åº”çš„éšæœºæŠ½å–çš„å•è¯5min,30min,12houråˆ†åˆ«æ ‡è®°ä¸º1
		word_log.loc['time'][random_word] = time_stamp
		word_log.iloc[0:3][random_word][0] = 1
		word_log.iloc[0:3][random_word][1] = 1
		word_log.iloc[0:3][random_word][2] = 1

	word_log.to_csv(word_path)
	print('æ ‡è®°å®Œæˆ'.center(40,'='))


#å‡½æ•°åŠŸèƒ½:è¯»å–æ—¥å¿—å·²ç»é€‰æ‹©çš„å•è¯ç´¢å¼•å†…å®¹è¿”å›åˆ—è¡¨
def data_log_read(data_log_path):
	data_logs = pd.read_csv(data_log_path)
	data_log_index = np.array(data_logs).tolist()
	return data_log_index

#å‡½æ•°åŠŸèƒ½ï¼šé€šè¿‡ç´¢å¼•æå–dataframeä¸­çš„è¡Œï¼Œè¿”å›å¯¹åº”çš„dataframeæ•°æ®æ–¹ä¾¿ç”Ÿæˆcsvæ–‡ä»¶
def random_80_word_to_csv(random_index,words):
	random_80_word_df = words.iloc[random_index,:]
	return random_80_word_df

#å‡½æ•°åŠŸèƒ½ï¼šéšæœºä»ä¼ å…¥çš„å•è¯ç´¢å¼•åˆ—è¡¨ä¸­æŠ½å–80ä¸ªè¯
def random_80_word(words_indexs,words):

	data_log_path = 'data/data_log.csv'
	# print(type(words_index))#æ˜¾ç¤ºä¼ å…¥ç´¢å¼•æ ¼å¼
	try:
		data_log_index = data_log_read(data_log_path)#è¿”å›æ—¥å¿—ä¸­çš„ç´¢å¼•
		words_index = [i for  i in words_indexs if i not in data_log_index]
	except :
		words_index= list(words_indexs)
	random_word = random.sample(list(words_index),80)#åŒæ—¶è®°å½•è¢«é€‰ä¸­çš„ç´¢å¼•æ•°æ®
	print(len(random_word))
	random_words = find_word(random_word,words)[['å•è¯']]
	random_words = np.array(random_words).tolist()#è¿™é‡Œæ˜¯åˆ—è¡¨åµŒå¥—çš„å½¢å¼éœ€è¦è§£å¥—
	random_words = [i[0] for i in random_words]#å°†éšæœºæŠ½å–çš„
	#timeæ¨¡å—çš„ä½¿ç”¨è¿˜è¦è€ƒè™‘åˆ°åé¢everyday_word.csvæ–‡ä»¶å‘½åçš„é—®é¢˜ï¼Œæ–‡ä»¶åç§°ä¸­ä¸èƒ½æœ‰ç‰¹æ®Šç¬¦å·
	time_stamp = time.strftime("%Y-%m-%d-%H-%M", time.localtime())#ä½¿ç”¨timeæ¨¡å—ä»¥å¯¹åº”çš„å¹´-æœˆ-æ—¥-å°æ—¶-åˆ†é’Ÿçš„å½¢å¼è¿”å›çš„æ•°æ®ä¸ºå­—ç¬¦ä¸²
	every_day_word_path = 'every_day_word/'+str(time_stamp)+'.csv'
	random_80_word_df = random_80_word_to_csv(random_word,words)#åœ¨è¿™ä¸€æ­¥è°ƒç”¨å‡½æ•°åŒæ—¶ç”Ÿæˆå¯¹åº”randomæ–‡ä»¶æ•°æ®
	word_csv_log(random_words,time_stamp)

	print(type(random_80_word_df))
	random_80_word_df.to_csv(every_day_word_path)
	data = {time_stamp: random_word}#ç”¨äºdata_log.csvè·¯å¾„ä¸å­˜åœ¨æƒ…å†µ
	if os.path.exists(data_log_path):#å°†ä»Šå¤©ç”Ÿæˆçš„éšæœºå•è¯å­˜å…¥æ—¥å¿—csvæ–‡ä»¶ä¸­å¤‡ç”¨
		datas = pd.read_csv(data_log_path)
		datas.loc[:, str(time_stamp)] = pd.Series(random_word)
		# datas[time_stamp] = random_word #æ³¨æ„ï¼Œç”±äºæ—¥æœŸçš„åŸå› æ— æ³•è¾“å…¥åˆ—ç´¢å¼•ç›¸åŒçš„æ•°æ®ï¼Œdataframeæœ¬è´¨æœ‰ç‚¹åƒä¼˜åŒ–çš„æ•°æ®åº“
		datas.to_csv(data_log_path,index=False)#æ³¨æ„è¿™é‡Œçš„modeçš„è®¾ç½®ï¼Œå¿…é¡»è®¾ç½®ä¸ºè¦†ç›–æ¨¡å¼
	else:
		datas = pd.DataFrame(data)
		datas.to_csv(data_log_path, index=False)


	return random_word,every_day_word_path#å°†éšæœºç´¢å¼•çš„80ä¸ªè¯è¿”å›




random_word_index,every_day_word_path = random_80_word(words_indexs=words_index,words= words)
# print(random_word_index)

random_words_df = find_word(random_word_index,words)#è¿”å›çš„ä¾ç„¶æ˜¯dataframeæ ¼å¼çš„æ•°æ®
# print(type(random_words))#è¿”å›ç´¢å¼•åˆ°çš„å•è¯æ•°æ®ç”¨äºå»ºç«‹æ—¥æœŸè¡¨
random_words = random_words_df[['å•è¯']]#å¯¹åˆ—è¿›è¡Œæ“ä½œè¿™é‡Œè¿˜æ˜¯dataframeæ ¼å¼
random_words_lists = np.array(random_words).tolist()#æ³¨æ„è¿™é‡Œçš„random_words_listæ¯ä¸€ä¸ªrandom_wordéƒ½æ˜¯å•ç‹¬çš„åˆ—è¡¨ï¼Œè¿­ä»£æ—¶éœ€è¦[0]

for random_word in random_words_lists:
	print('ä»Šæ—¥éšæœºå•è¯'.center(80,'='))
	print(random_word[0])
#è¿™é‡Œå€ŸåŠ©numpyå°†dataframeè½¬æ¢ä¸ºlistæ ¼å¼æ–¹ä¾¿åé¢è¿›è¡Œæ–‡ä»¶é‡ç»„æ—¶é—´æ–‡ä»¶

#word_read_pro.pyçš„æœ€ç»ˆç›®çš„å°±æ˜¯æä¾›80ä¸ªéšæœºå•è¯ï¼Œä¸å…·å¤‡åˆ¤æ–­èƒ½åŠ›,ä½†æ˜¯è®°å½•éšæœºç­›é€‰çš„å•è¯çš„ç´¢å¼•

#åœ¨éšåçš„è¿”å›å‡½æ•°ä¸­æ ¹æ®csvæ—¶é—´æ–‡ä»¶åˆ¤æ–­æ˜¯å¦éœ€è¦call_back
# random_words_lists = np.array(random_words).tolist()#æ³¨æ„è¿™é‡Œçš„random_words_listæ¯ä¸€ä¸ªrandom_wordéƒ½æ˜¯å•ç‹¬çš„åˆ—è¡¨ï¼Œè¿­ä»£æ—¶éœ€è¦[0]

```
___
## temp_word_write_pro.py
æš‚æ—¶æ–‡ä»¶è¯»å†™æ¨¡å—
ä¸»è¦ç”¨äºå°†wordä¸­çš„å•è¯æ•°æ®è½¬åŒ–ä¸ºdataæ—¥å¿—çš„æ–¹å¼ï¼Œæ–¹ä¾¿åé¢çš„å­˜å‚¨ä¸æ•°æ®å¤„ç†ã€‚è¿™ä¸€æ¨¡å—éœ€è¦å•ç‹¬è¿è¡Œï¼Œå¯ä»¥åœ¨éƒ¨ç½²æœåŠ¡å™¨ä¹‹å‰è¿è¡Œä¸€éå°±å¥½ï¼Œå½“ç„¶è¿˜æ˜¯è¦æ³¨æ„centos7çš„ç»å¯¹è·¯å¾„çš„é—®é¢˜ã€‚
*show me the code* 

```
# auther : keepython
import pandas as pd
import numpy as np
import random
file_name = 'å…­çº§æ ¸å¿ƒè¯æ±‡è¡¨(EXCELè¡¨æ ¼)'
word_file_path = '/word_recording_project/word/' + file_name+'.xls'
words = pd.read_excel(word_file_path,header=0)
words_index = words.index

words = words[['å•è¯']]
print(len(np.array(words).tolist()))
words = np.array(words).tolist()#å°†æ‰€æœ‰å•è¯è½¬æ¢ä¸ºåˆ—ç´¢å¼•ï¼Œè¡Œç´¢å¼•è½¬æ¢ä¸ºå¤©æ•°
print(len(words))
datas = {}
for word in words :
	datas[word[0]] = {
			"5min":0,
			"30min":0,
			'12hour':0,
			'day1':0,
			'day2':0,
			'day4':0,
			'day7':0,
			'day15':0,
			'time':'1111-11-11-11-11'
			}

words_df = pd.DataFrame(data=datas)
print(words_df)
words_df.to_csv('/word_recording_project/data/word.csv')
# print(words_df)


```
## every_day_count_pro.py
è¿™ä¸€éƒ¨åˆ†ä»æ ‡é¢˜æ¥çœ‹å°±æ˜¯ç”¨äºå¯¹every_day_wordä¸­çš„æ–‡ä»¶ä¸dataä¸­çš„æ—¥å¿—æ–‡ä»¶é…åˆè®¡æ—¶å¹¶è¿”å›å¯¹åº”çš„æ–‡ä»¶è·¯å¾„ç”¨äºåé¢çš„é‚®ä»¶å‘é€è°ƒç”¨ã€‚

```
import time
import datetime
import pandas as pd
import numpy as np
from  word_read_project import every_day_word_path
from mail_send_project import mail_send_fuc

#å‡½æ•°åŠŸèƒ½ï¼šè´Ÿè´£timeæ—¶é—´çš„ç›¸å‡,å¹¶åˆ†åˆ«è¿”å›æ—¶é—´é—´éš”æ—¶é—´ä¸º1day 2day 4day 7day 15day çš„è·¯å¾„åˆ—è¡¨
def read_log_remind():
	word_log_path = '/word_recording_project/data/word.csv'
	word_log = pd.read_csv(word_log_path,index_col=0)
	word_log = word_log.T
	word_log = word_log[word_log.time != '1111-11-11-11-11']  # æå–word.csvæ–‡ä»¶ä¸­timeæ‰€æœ‰ä¸ç­‰äºâ€˜1111-11-11-11-11â€™çš„æ¨¡å—
	#å°†çŸ©é˜µè½¬ç½®æ–¹ä¾¿ä½¿ç”¨indexæå–è·¯å¾„
	time_stamp = time.strftime("%Y-%m-%d-%H-%M", time.localtime()).split('-')
	log_times = np.array(word_log['time']).tolist()
	today = datetime.datetime(int(time_stamp[0]),
	                          int(time_stamp[1]),
	                          int(time_stamp[2]),
	                          int(time_stamp[3]),
	                          int(time_stamp[4]))
	#åˆ†åˆ«è®¾ç½®å¯¹åº”å¤©æ•°çš„è·¯å¾„åˆ—è¡¨
	day_1_path = []
	day_2_path = []
	day_4_path = []
	day_7_path = []
	day_15_path = []
	for log_time in log_times:
		log_timed = log_time.split('-')
		# print(log_timed)
		last_day = datetime.datetime(
			int(log_timed[0]),
			int(log_timed[1]),
			int(log_timed[2]),
			int(log_timed[3]),
			int(log_timed[4])
		)
		reduce = today - last_day
		#ç”¨äºåˆ¤æ–­å¤©æ•°
		if reduce.days == 1:
			path  = '/word_recording_project/every_day_word/'+log_time+'.csv'
			day_1_path.append(path)
		elif reduce.days == 2:
			path = '/word_recording_project/every_day_word/' + log_time+'.csv'
			day_2_path.append(path)
		elif reduce.days == 4:
			path = '/word_recording_project/every_day_word/' + log_time+'.csv'
			day_4_path.append(path)
		elif reduce.days == 7:
			path = '/word_recording_project/every_day_word/' + log_time+'.csv'
			day_7_path.append(path)
		elif reduce.days == 15:
			path = '/word_recording_project/every_day_word/' + log_time+'.csv'
			day_15_path.append(path)
	#åˆ—è¡¨æ”¶é›†å®Œè·¯å¾„åè¿˜éœ€è¦å»é‡
	day_1_path = list(set(day_1_path))
	day_2_path = list(set(day_2_path))
	day_4_path = list(set(day_4_path))
	day_7_path = list(set(day_7_path))
	day_15_path = list(set(day_15_path))


	return day_1_path,day_2_path,day_4_path,day_7_path,day_15_path

#è´Ÿè´£å½“å¤©çš„æ¨è¿›5 min 30 min 12å°æ—¶
def today_word_count():
	today_path = every_day_word_path
	print('ä»Šæ—¥è¦æ¨é€çš„åœ°å€æ˜¯ï¼š ',today_path)
	time_stamp = time.strftime("%Y-%m-%d", time.localtime())
	subject = 'è‰¾å®¾æµ©æ–¯ '+time_stamp+' ç¬¬ä¸€æ¬¡å•è¯æé†’'
	mail_send_fuc(today_path,subject)
	time.sleep(300)#5minæé†’
	mail_send_fuc(today_path,subject)
	time.sleep(1500)#30minæé†’
	mail_send_fuc(today_path,subject)
	time.sleep(41400)#12å°æ—¶æé†’
	mail_send_fuc(today_path,subject)



```
## mail_send_project.py
é‚®ä»¶å‘é€ï¼Œè¾“å…¥é‚®ä»¶ä¸»é¢˜å’Œå¯¹åº”çš„é™„ä»¶è·¯å¾„ç›´æ¥å‘é€,æ³¨æ„ä½¿ç”¨çš„æ—¶å€™ä¿®æ”¹ä¸€ä¸‹å¯¹åº”çš„ä¸€äº›å˜é‡ã€‚

```

import smtplib
from email.header import Header
from email.mime.text import MIMEText
from email.mime.multipart import MIMEMultipart
from email.mime.application import MIMEApplication
#ä»word.csvæ–‡ä»¶ä¼ å…¥æ–‡ä»¶everydayæ–‡ä»¶è·¯å¾„å°±å¯ä»¥ç›´æ¥å‘é€é‚®ä»¶
# everyday_file_path = '2020-02-02.csv'

#å‡½æ•°åŠŸèƒ½ï¼šä¼ å…¥é™„ä»¶è·¯å¾„ï¼Œé‚®ä»¶çš„ä¸»é¢˜å‘é€é‚®ä»¶å¹¶è¿”å›å‘é€çŠ¶æ€

def mail_send_fuc(everyday_file_path,subject):

	message = MIMEMultipart()
	msg_from = '***********'  # å‘é€æ–¹é‚®ç®±åœ°å€ã€‚
	password = '***************'  # å‘é€æ–¹QQé‚®ç®±æˆæƒç ï¼Œä¸æ˜¯QQé‚®ç®±å¯†ç ã€‚
	msg_to = '*************'
	msg_to_1 = '******************'  # æ”¶ä»¶äººé‚®ç®±åœ°å€ã€‚

	message = MIMEMultipart()
	message['From'] = msg_from  # å‘é€è€…
	message['To'] = msg_to  # æ¥æ”¶è€…

	# é‚®ä»¶æ ‡é¢˜
	message['Subject'] = Header(subject, 'utf-8')

	# é‚®ä»¶æ­£æ–‡å†…å®¹
	message.attach(MIMEText('è‰¾å®¾æµ©æ–¯æ ¹æ®ä½ çš„é—å¿˜æ›²çº¿æé†’å•è¯'.center(20,'+'), 'plain', 'utf-8'))

	#æ‰“å¼€æ–‡ä»¶

	part = MIMEApplication(open(everyday_file_path, 'rb').read())
	part.add_header('Content-Disposition', 'attachment', filename=everyday_file_path)

	message.attach(part)#æ·»åŠ æ–‡ä»¶

	try:
		client = smtplib.SMTP_SSL('smtp.qq.com', smtplib.SMTP_SSL_PORT)
		print("è¿æ¥åˆ°é‚®ä»¶æœåŠ¡å™¨æˆåŠŸ")

		client.login(msg_from, password)
		print("ç™»å½•æˆåŠŸ")
		client.sendmail(msg_from, msg_to, message.as_string())
		print("å‘é€æˆåŠŸ")
	except smtplib.SMTPException as e:
		print("å‘é€é‚®ä»¶å¼‚å¸¸")
	finally:
		client.quit()

# mail_send_fuc(everyday_file_path)

```
___
## main_code.py
è°ƒç”¨æ‰€æœ‰æ¨¡å—å’Œå‡½æ•°ï¼Œå°†ä¹‹ç»„åˆèµ·æ¥å®ç°æœ€ç»ˆçš„åŠŸèƒ½ã€‚é¡¹ç›®åœ¨è°ƒç”¨çš„æ—¶å€™ä¹Ÿåªéœ€è¦è°ƒç”¨main_dode.pyå°±å¯ä»¥äº†ã€‚

```
import pandas as pd
import numpy as np
import os
import time
import random
from every_day_count_pro import *

#æ€»çš„æ‰§è¡Œå‡½æ•°åŒ…æ‹¬å†™å…¥word.csvæ—¥å¿—çš„åŠŸèƒ½

if __name__ == '__main__':
	day_1_paths, day_2_paths, day_4_paths, day_7_paths, day_15_paths = read_log_remind()
	today_word_count()
	time.sleep(3600)
	#1å°æ—¶åå†å¤ä¹ æ˜¨å¤©çš„çŸ¥è¯†
	if len(day_1_paths) != False:
		for day_1_path in day_1_paths:
			subject = '1 å¤©å‰çš„å•è¯å¤ä¹ '.center(20,'=')
			mail_send_fuc(day_1_path,subject)

	time.sleep(900)

	if len(day_2_paths) != False:
		for day_2_path in day_2_paths:
			subject = '2 å¤©å‰çš„å•è¯å¤ä¹ '.center(20,'=')
			mail_send_fuc(day_2_path,subject)

	time.sleep(900)

	if len(day_4_paths) != False:
		for day_4_path in day_4_paths:
			subject = '4 å¤©å‰çš„å•è¯å¤ä¹ '.center(20,'=')
			mail_send_fuc(day_4_path,subject)

	time.sleep(900)

	if len(day_7_paths) != False:
		for day_7_path in day_7_paths:
			subject = '4 å¤©å‰çš„å•è¯å¤ä¹ '.center(20,'=')
			mail_send_fuc(day_7_path,subject)

	time.sleep(900)

	if len(day_15_paths) != False:
		for day_15_path in day_15_paths:
			subject = '15 å¤©å‰çš„å•è¯å¤ä¹ '.center(20,'=')
			mail_send_fuc(day_15_path,subject)



```
___

é¡¹ç›®åˆ°è¿™é‡Œå°±ç®—å¼€å‘å®Œæˆå•¦ï¼Œæ³¨æ„è¿™é‡Œé¢çš„dataframeæ•°æ®çš„æ“ä½œçœŸçš„éå¸¸é«˜æ•ˆï¼Œä½†æ˜¯å‘ä¹Ÿå¾ˆå¤šå¸Œæœ›æœ‰éœ€è¦çš„åŒå­¦ä¸€å®šè¦è®¤çœŸçœ‹ã€‚â”‘(ï¿£Ğ” ï¿£)â”
___
## æœåŠ¡å™¨å®šæ—¶ä»»åŠ¡éƒ¨ç½²
è¿™ä¸€éƒ¨åˆ†ä¸€å®šè¦ä¿®æ”¹å¥½ä»£ç é‡Œé¢å¯¹åº”çš„è·¯å¾„ï¼Œè¿˜æ˜¯é‚£å¥è¯centos7é‡Œé¢çš„ç»å¯¹è·¯å¾„çš„é—®é¢˜ã€‚

**ç¼–è¾‘crontabé…ç½®**è¿™ä¸€æ­¥è¯¦ç»†è§£é‡Šå¯ä»¥çœ‹è¿™é‡Œï¼š

[Linux-Centos ç”¨crontabå®šæ—¶è¿è¡Œpythonè„šæœ¬è¯¦ç»†æ­¥éª¤](https://blog.csdn.net/qq874455953/article/details/81586508)

```
 crontab -e
```
  **ç¼–å†™é…ç½®æ–‡ä»¶**
  
å½“æ‰“å¼€é…ç½®æ–‡ä»¶çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç±»ä¼¼çš„é…ç½®ä»£ç ã€‚æ¯ä¸€è¡Œéƒ½ä»£è¡¨ä¸€ä¸ªå®šæ—¶ä»»åŠ¡ ï¼Œ æˆ‘ä»¬è¦åšçš„å°±æ˜¯æ–°æ·»åŠ ä¸€è¡Œé…ç½®ä»£ç ã€‚

**é‡å¯æœåŠ¡**

```
service crond restart 
```
æœ€ç»ˆå°±å®Œæˆå•¦

æ¬¢è¿ç•™è¨€äº¤æµå­¦ä¹ ï¼Œæœ‰ä»€ä¹ˆç–‘é—®ä¹Ÿå¯ä»¥äº¤æµï¼Œå¦‚æœèŠçš„å¼€å¿ƒè¿˜å¯ä»¥å¤šä¸€ä¸ªæœ‹å‹ã€‚

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200203135653362.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzc0NTU4OA==,size_16,color_FFFFFF,t_70)
